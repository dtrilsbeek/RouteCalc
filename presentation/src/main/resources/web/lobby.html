<!DOCTYPE html>
<html>

<head>
    <title>TekenGame - lobby</title>
    <link href="./css/lobby.css" rel="stylesheet">
    <link href="./css/theme.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="add-gradient">
    <nav>
        <h2>TekenGame</h2>
        <a href="/new"><button id="btnCreateRoom" class="submit-button">create room</button></a>
    </nav>
    <div id="content"></div>
        
    <script>

        const makeCard = card => `
        <div class="room">
                <div class="title">
                    <h3>${card.name} (${card.players.length}/8)</h3>
                </div>

                <div class="content">
                    <b>players:</b>
                    <p class="players">${card.players.join(",")}</p>
                </div>

                <div class="bottom">
                    ${card.players.length < 8 ?
            `<a href="join/${card.id}"><button class="btnJoin">join!</button></a>` :
            '<button disabled class="btnJoin">Room is full...</button>'}
                </div>

            </div>   
        `;

        const load = async () => {

            const rooms = await (await fetch(window.location.origin + "/rooms")).json();
            const content = document.querySelector("#content");
    
            for(let room of rooms) {
                content.innerHTML += makeCard(room);
            }

        };


        load();

    </script>
</body>
</html>